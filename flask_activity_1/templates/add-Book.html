{% extends 'main.html' %}
{% block content %}
<form id = 'form' action="" method="post">
    <div class="form-input">
        <label> Book Title: </label>
        <input id = 'title' type="text" name="title" />
    </div>
    <div class="form-input">
        <label> Book Author Name: </label>
        <input id = 'author' type="text" name="author" />
    </div>
    <div class="form-input">
        <label> Book Type: </label>
        <input id = 'type' type="text" name="type" />
    </div>
    <button type="submit" class="btn cold float-right"> Add + </button>
</form>


<script>

// implementing POST
// action
document.getElementById("form").onsubmit = function (e){
    e.preventDefault();
    // gathering user inputs
    const titleInput = document.getElementById("title")
    const authorInput = document.getElementById("author")
    const typeInput = document.getElementById("type")
    console.log(authorInput.value);
    console.log('event', e);
    fetch('/add-book', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'

        },
        body: JSON.stringify({
            'title': titleInput.value,
            'author': authorInput.value,
            'type': typeInput.value
        })
    }).then(function(){
        window.location.replace("/");
    })
}

</script>

{% endblock %}